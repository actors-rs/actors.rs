# verified on https://config.travis-ci.com/explore
language: rust
os: linux
dist: xenial
jobs:
  include:
    - rust: stable
      before_install:
        - curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -
        - curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -
        - echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list
        - sudo apt-get update
        - sudo apt-get install -y nodejs
        - sudo apt install python3-pip
        - pip install --upgrade pip
        - pip3 install pre-commit --user
      script:
        - pre-commit run -a
        - cargo update
        - cargo check --all --no-default-features
        - cargo test --all-features --all -- --nocapture
        - cd actors-macros; cargo test --no-default-features -- --nocapture; cd ..
